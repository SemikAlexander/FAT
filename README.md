# FAT

Во время проектирования файловой системы была спроектирована логическая разметка диска, которая представленна ниже.

| Главная запись | Файл MFT | Файл ASFS | Файл GROUPS | Файл USERS | Блоки данных | Копия файла | MFT Блоки данных | Копия главной записи |
| -------------- | -------- | --------- | ----------- | ---------- | ------------ | ----------- | ---------------- | -------------------- |

#### Главная запись

Главная запись – запись, которая используется при старте системы и
предназначена для сохранения информации.
При запуске системы данные из главной записи получают номера адресов блоков MFT, копии MFT, размер кластера. После получения этих данных происходит проверка на целостность считанных данных с главной записи. Для целостности полученных данных используется формула:

$$CRC = {Размер сектора \p Номер блока MFT \over 3}.$$

Если полученные данные по формуле не равны, считается, что данные в MFT повреждены. В этом случае считываются данные с копии MFT и проверяется значение новых данных по той же формуле. В случае неудачи, файловая система возвращает ошибку и заканчивает своё выполнение.
